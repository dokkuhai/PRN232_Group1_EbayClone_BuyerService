<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Forgot Password</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		body {
			display: flex;
			height: 100vh;
			justify-content: center;
			align-items: center;
			background: #f8f9fa;
		}

		.card {
			/* === SỬA RESPONSIVE === */
			max-width: 380px;
			/* Giới hạn độ rộng tối đa */
			width: 100%;
			/* Chiếm 100% chiều rộng cha */
			margin: 0 1rem;
			/* Thêm khoảng đệm 2 bên trên màn hình nhỏ */
			/* ======================= */

			border-radius: 12px;
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
		}
	</style>
</head>

<body>
	<div class="card p-4">
		<h4 class="text-center mb-3 text-primary">Forgot Password</h4>
		<p class="text-center text-muted small mb-4">
			Enter your registered email, and we'll send you a link to reset your password.
		</p>

		<div class="mb-3">
			<label class="form-label">Your Email</label>
			<input type="email" id="email" class="form-control" placeholder="example@gmail.com" required>
		</div>

		<button class="btn btn-primary w-100" id="btnSend">Send Reset Link</button>

		<p id="message" class="text-center mt-3"></p>
	</div>

	<script>
		document.getElementById("btnSend").addEventListener("click", async () => {
			const email = document.getElementById("email").value.trim();
			const msg = document.getElementById("message");
			msg.innerText = "";

			if (!email) {
				msg.innerText = "Please enter your email."; // Đã dịch
				msg.className = "text-danger text-center";
				return;
			}

			try {
				const res = await fetch("https://localhost:7020/api/User/forgot-password", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify({ email })
				});

				// Cải thiện logic: Đọc thông báo trực tiếp từ API
				const data = await res.json();

				if (res.ok) {
					// Hiển thị thông báo an toàn mà API trả về
					msg.innerText = "" + data.message;
					msg.className = "text-success text-center";
				} else {
					// Hiển thị lỗi từ API (nếu có)
					msg.innerText = "" + (data.message || "An unexpected error occurred.");
					msg.className = "text-danger text-center";
				}
			} catch (err) {
				msg.innerText = "Server connection error.";
				msg.className = "text-danger text-center";
			}
		});
	</script>
</body>

</html>
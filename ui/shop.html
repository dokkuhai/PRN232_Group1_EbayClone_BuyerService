<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

	<!-- title -->
	<title>Shop</title>

	<!-- favicon -->
	<link rel="shortcut icon" type="image/png" href="assets/img/favicon.png">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<!-- fontawesome -->
	<link rel="stylesheet" href="assets/css/all.min.css">
	<!-- bootstrap -->
	<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
	<!-- owl carousel -->
	<link rel="stylesheet" href="assets/css/owl.carousel.css">
	<!-- magnific popup -->
	<link rel="stylesheet" href="assets/css/magnific-popup.css">
	<!-- animate css -->
	<link rel="stylesheet" href="assets/css/animate.css">
	<!-- mean menu css -->
	<link rel="stylesheet" href="assets/css/meanmenu.min.css">
	<!-- main style -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- responsive -->
	<link rel="stylesheet" href="assets/css/responsive.css">
<style>
  select.form-select {
    float: right;
    border-radius: 8px;
    padding: 6px 10px;
  }
/* ------------------------------
   LAYOUT: eBay style
------------------------------ */
.ebay-container {
    display: flex;
    gap: 25px;
}

/* ------------------------------
   SIDEBAR FILTER
------------------------------ */
.ebay-sidebar {
    width: 220px;
    min-width: 200px;
}

.ebay-sidebar h4 {
    font-size: 18px;
    margin-bottom: 10px;
}

.ebay-sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.ebay-sidebar ul li {
    padding: 5px 0;
    cursor: pointer;
}

.ebay-sidebar ul li:hover {
    text-decoration: underline;
}

/* ------------------------------
   PRODUCT GRID (5 per row)
------------------------------ */
.ebay-products {
    flex: 1;
}

.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 18px;
}

/* ------------------------------
   PRODUCT CARD (eBay style)
------------------------------ */
.product-card {
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 12px;
    background: #fff;
    transition: .2s;
}

.product-card:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}

.product-card img {
    width: 100%;
    height: 200px;
    object-fit: contain;
    background: #fff;
}

.product-title {
    font-size: 15px;
    font-weight: 500;
    color: #333;
    margin: 8px 0;
    height: 38px;
    overflow: hidden;
}

.product-price {
    font-size: 19px;
    font-weight: bold;
    color: #0654ba;
}

/* ------------------------------
   SORT BAR
------------------------------ */
.sort-bar {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-bottom: 15px;
}

.sort-bar select {
    padding: 6px;
    border-radius: 6px;
    border: 1px solid #bbb;
}

/* ------------------------------
   PAGINATION
------------------------------ */
.ebay-pagination {
    text-align: center;
    margin-top: 25px;
}

.ebay-pagination a {
    padding: 8px 14px;
    margin: 0 4px;
    border: 1px solid #ccc;
    border-radius: 6px;
    text-decoration: none;
}

.ebay-pagination a.active {
    background: #0654ba;
    color: #fff;
}

</style>

</head>
<body>
	
	<!--PreLoader-->
    <div class="loader">
        <div class="loader-inner">
            <div class="circle"></div>
        </div>
    </div>
    <!--PreLoader Ends-->
	
	<!-- header -->
	<div class="top-header-area" id="sticker">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 text-center">
					<div class="main-menu-wrap">
						<!-- logo -->
						<div class="site-logo">
							<a href="index.html">
								<img src="assets/img/logo.png" alt="">
							</a>
						</div>
						<!-- logo -->

						<!-- menu start -->
						<nav class="main-menu">
							<ul>
								<li class="current-list-item"><a href="#">Home</a>
									<ul class="sub-menu">
										<li><a href="index.html">Static Home</a></li>
										<li><a href="index_2.html">Slider Home</a></li>
									</ul>
								</li>
								<li><a href="about.html">About</a></li>
								<li><a href="#">Pages</a>
									<ul class="sub-menu">
										<li><a href="404.html">404 page</a></li>
										<li><a href="about.html">About</a></li>
										<li><a href="cart.html">Cart</a></li>
										<li><a href="checkout.html">Check Out</a></li>
										<li><a href="contact.html">Contact</a></li>
										<li><a href="news.html">News</a></li>
										<li><a href="shop.html">Shop</a></li>
									</ul>
								</li>
								<li><a href="news.html">News</a>
									<ul class="sub-menu">
										<li><a href="news.html">News</a></li>
										<li><a href="single-news.html">Single News</a></li>
									</ul>
								</li>
								<li><a href="contact.html">Contact</a></li>
								<li><a href="shop.html">Shop</a>
									<ul class="sub-menu">
										<li><a href="shop.html">Shop</a></li>
										<li><a href="checkout.html">Check Out</a></li>
										<li><a href="single-product.html">Single Product</a></li>
										<li><a href="cart.html">Cart</a></li>
									</ul>
								</li>
								<li>
									<div class="header-icons">
										<a class="shopping-cart" href="cart.html"><i class="fas fa-shopping-cart"></i></a>
										<a class="mobile-hide search-bar-icon" href="#"><i class="fas fa-search"></i></a>
									</div>
								</li>
							</ul>
						</nav>
						<a class="mobile-show search-bar-icon" href="#"><i class="fas fa-search"></i></a>
						<div class="mobile-menu"></div>
						<!-- menu end -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->

	<!-- search area -->
	<div class="search-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<span class="close-btn"><i class="fas fa-window-close"></i></span>
					<div class="search-bar">
						<div class="search-bar-tablecell">
							<h3>Search For:</h3>
							<input type="text" placeholder="Keywords">
							<button type="submit">Search <i class="fas fa-search"></i></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end search arewa -->
	
	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						<p>Ebay</p>
						<h1>Shop</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

	<!-- products -->
	<div class="product-section mt-150 mb-150">
    <div class="container">

        <!-- Search bar giống eBay -->
        <div style="margin-bottom:20px;">
            <input id="search-box" type="text" placeholder="Search products..."
                   style="width:100%; padding:12px; border-radius:8px; border:1px solid #bbb;">
        </div>

        <!-- Sort bar -->
        <div class="sort-bar">

            <select id="sort-product">
                <option value="">Best Match</option>
                <option value="Price asc">Price Low–High</option>
                <option value="Price desc">Price High–Low</option>
                <option value="Title asc">Name A–Z</option>
                <option value="Title desc">Name Z–A</option>
            </select>
        </div>

        <div class="ebay-container">
            <!-- Sidebar -->
            <div class="ebay-sidebar">
                <h4>Categories</h4>
                <ul id="category-list"></ul>
            </div>

            <!-- Product list -->
            <div class="ebay-products">
                <div id="product-grid" class="product-grid"></div>

                <div id="pagination" class="ebay-pagination"></div>
            </div>
        </div>

    </div>
</div>

	<!-- end products -->

	<!-- logo carousel -->
	<div class="logo-carousel-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="logo-carousel-inner">
						<div class="single-logo-item">
							<img src="assets/img/company-logos/1.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/2.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/3.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/4.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/5.png" alt="">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end logo carousel -->

	<!-- footer -->
	<div class="footer-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6">
					<div class="footer-box about-widget">
						<h2 class="widget-title">About us</h2>
						<p>Group 1 SE 1848</p>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box get-in-touch">
						<h2 class="widget-title">Get in Touch</h2>
						<ul>
							<li>Group 1 </li>
							<li>Leader: Vũ Đức Hải</li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box pages">
						<h2 class="widget-title">Pages</h2>
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="about.html">About</a></li>
							<li><a href="services.html">Shop</a></li>
							<li><a href="news.html">News</a></li>
							<li><a href="contact.html">Contact</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box subscribe">
						<h2 class="widget-title">Subscribe</h2>
						<p>Subscribe to our mailing list to get the latest updates.</p>
						<form action="index.html">
							<input type="email" placeholder="Email">
							<button type="submit"><i class="fas fa-paper-plane"></i></button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end footer -->
	
	<!-- copyright -->
	<div class="copyright">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-md-12">
					<p>Copyrights &copy; 2019 - <a href="https://imransdesign.com/">Imran Hossain</a>,  All Rights Reserved.<br>
						Distributed By - <a href="https://themewagon.com/">Themewagon</a>
					</p>
				</div>
				<div class="col-lg-6 text-right col-md-12">
					<div class="social-icons">
						<ul>
							<li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end copyright -->
	
	<!-- jquery -->
	<script src="assets/js/jquery-1.11.3.min.js"></script>
	<!-- bootstrap -->
	<script src="assets/bootstrap/js/bootstrap.min.js"></script>
	<!-- count down -->
	<script src="assets/js/jquery.countdown.js"></script>
	<!-- isotope -->
	<script src="assets/js/jquery.isotope-3.0.6.min.js"></script>
	<!-- waypoints -->
	<script src="assets/js/waypoints.js"></script>
	<!-- owl carousel -->
	<script src="assets/js/owl.carousel.min.js"></script>
	<!-- magnific popup -->
	<script src="assets/js/jquery.magnific-popup.min.js"></script>
	<!-- mean menu -->
	<script src="assets/js/jquery.meanmenu.min.js"></script>
	<!-- sticker js -->
	<script src="assets/js/sticker.js"></script>
	<!-- main js -->
	<script src="assets/js/main.js"></script>
<script>
const baseUrl = "https://ebay.dokkuhai.dpdns.org";
const apiUrl = `${baseUrl}/api/Product`;

// UI elements
const grid = document.getElementById("product-grid");
const categoryList = document.getElementById("category-list");
const pagination = document.getElementById("pagination");

// State
let productsFull = [];
let page = 0;
const pageSize = 10;

let currentSearch = "";
let currentSort = "";
let currentCategory = "";

// ==============================
// LOAD PRODUCTS
// ==============================
async function loadProducts() {
    const res = await fetch(apiUrl);
    productsFull = await res.json();
    render();
    loadCategories();
}

// ==============================
// CATEGORY LIST (Sidebar)
// ==============================
function loadCategories() {
    const categories = new Set(productsFull.map(p => p.category?.name ?? "Unknown"));
    categoryList.innerHTML = "";

    categoryList.insertAdjacentHTML("beforeend", `<li data-cat="">All</li>`);

    categories.forEach(cat => {
        categoryList.insertAdjacentHTML(
            "beforeend",
            `<li data-cat="${cat}">${cat}</li>`
        );
    });

    // Sidebar click filter
    document.querySelectorAll("#category-list li").forEach(li => {
        li.onclick = () => {
            currentCategory = li.dataset.cat;
            page = 0;
            render();
        };
    });
}

// ==============================
// RENDER PRODUCT GRID
// ==============================
function render() {
    let list = [...productsFull];

    // Filter search
    if (currentSearch.trim() !== "") {
        const key = currentSearch.toLowerCase();
        list = list.filter(p =>
            (p.title ?? "").toLowerCase().includes(key) ||
            (p.category?.name ?? "").toLowerCase().includes(key)
        );
    }

    // Category filter
    if (currentCategory !== "") {
        list = list.filter(p =>
            (p.category?.name ?? "") === currentCategory
        );
    }

    // ----- SORT -----
if (currentSort !== "") {
    const [field, direction] = currentSort.split(" ");
    const key = field.toLowerCase();

    list.sort((a, b) => {
        const va = a[key];
        const vb = b[key];

        // Nếu sort theo chữ (title)
        if (key === "title") {
            return direction === "asc"
                ? va.localeCompare(vb)
                : vb.localeCompare(va);
        }

        // Nếu sort theo số (price)
        if (key === "price") {
            return direction === "asc"
                ? va - vb
                : vb - va;
        }
        const ca = a.category?.name ?? a.category?.Name ?? "";
        const cb = b.category?.name ?? b.category?.Name ?? "";

        return currentCategorySort === "asc"
            ? ca.localeCompare(cb)
            : cb.localeCompare(ca);
        return 0;
    });
}


    // Paging
    const totalPages = Math.ceil(list.length / pageSize);
    const skip = page * pageSize;
    const pageData = list.slice(skip, skip + pageSize);

    // Render grid
    grid.innerHTML = "";
    pageData.forEach(p => {
        const img = p.images?.startsWith("http") ? p.images : "assets/img/products/default.jpg";
        
        grid.insertAdjacentHTML(
            "beforeend",
            `
            <div class="product-card">
                <a href="single-product.html?id=${p.id}">
                    <img src="${img}">
                </a>
                <div class="product-title">${p.title}</div>
                <div class="product-price">${p.price} VND</div>
            </div>
            `
        );
    });

    // Render pagination
    pagination.innerHTML = "";
    for (let i = 0; i < totalPages; i++) {
        pagination.insertAdjacentHTML(
            "beforeend",
            `<a href="#" data-page="${i}" class="${page === i ? "active" : ""}">${i + 1}</a>`
        );
    }

    document.querySelectorAll("#pagination a").forEach(a => {
        a.onclick = e => {
            e.preventDefault();
            page = parseInt(a.dataset.page);
            render();
        };
    });
}

// ==============================
// EVENT: Search
// ==============================
document.getElementById("search-box").addEventListener("keypress", e => {
    if (e.key === "Enter") {
        currentSearch = e.target.value;
        page = 0;
        render();
    }
});

// ==============================
// EVENT: Sort
// ==============================
document.getElementById("sort-product").onchange = e => {
    currentSort = e.target.value;
    page = 0;
    render();
};

// INIT
loadProducts();
</script>

</body>
</html>